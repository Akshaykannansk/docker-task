{% extends "layouts/base.html" %}

{% block content %}
<div class="row d-flex justify-content-center">
<div class="card col-md-5">
  <div class="card-body">
    <h2 class="card-title">Generate Coupon</h2>
    <form method="post" class ="p-5">
      {% csrf_token %}
      <div class="form-group">
        <label for="discount_amount">Discount Amount:</label>
        <input type="text" class="form-control" name="discount_amount" required>
      </div>
      <div class="form-group">
        <label for="expiration_date">Expiration Date:</label>
        <input type="date" id = "date" class="form-control" name="expiration_date" required>
      </div>
      <button type="submit" class="btn btn-primary">Generate</button>
    </form>
  </div>
</div>
{% endblock content %}

{% block javascripts %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.0/jquery.validate.min.js"></script>

<script>
  var date = new Date().toISOString().slice(0,10);

  //To restrict past date
  
  $('#date').attr('min', date);
  
$('#text_amount').keypress(function (e) {
  var regex = new RegExp("^[1-9]\d*$");
  var str = String.fromCharCode(!e.charCode ? e.which : e.charCode);
  if (regex.test(str)) {
      return true;
  }

  e.preventDefault();
  return false;
});
</script> 
{% endblock javascripts %}